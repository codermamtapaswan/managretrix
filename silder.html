<!DOCTYPE html>
<!-- Website - www.codingnepalweb.com -->
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Infinite Card Slider JavaScript | CodingNepal</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Fontawesome Link for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
  <style>
    /* Import Google font - Poppins */
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    body {
      display: flex;
      padding: 0 35px;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background: linear-gradient(to left top, #031A9A, #8B53FF);
    }

    .slide-wrapper {
      max-width: 1100px;
      width: 100%;
      position: relative;
    }

    .slide-wrapper .carousel {
      display: grid;
      grid-auto-flow: column;
      grid-auto-columns: calc((100% / 3) - 12px);
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      gap: 16px;
      border-radius: 8px;
      scroll-behavior: smooth;
      scrollbar-width: none;
    }

    .carousel::-webkit-scrollbar {
      display: none;
    }

    .carousel.no-transition {
      scroll-behavior: auto;
    }

    .carousel.dragging {
      scroll-snap-type: none;
      scroll-behavior: auto;
    }

    .carousel.dragging .slider-card {
      cursor: grab;
      user-select: none;
    }

    .carousel .slider-card {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .carousel .slider-card {
      scroll-snap-align: start;
      height: 342px;
      flex-direction: column;
    }

    .indicators {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }

    .indicator {
      width: 12px;
      height: 12px;
      background-color: #fff;
      border-radius: 50%;
      margin: 0 6px;
      cursor: pointer;
    }

    .indicator.active {
      background-color: #8B53FF;
    }

    @media screen and (max-width: 900px) {
      .slide-wrapper .carousel {
        grid-auto-columns: calc((100% / 2) - 9px);
      }
    }

    @media screen and (max-width: 600px) {
      .slide-wrapper .carousel {
        grid-auto-columns: 100%;
      }
    }

  </style>
</head>

<body>
  <div class="slide-wrapper">

    <div class="carousel">

      <div class="slide-card">
        <div class="testimonial-wrap flex">
          <p class="mb-0">It is a long established fact that a reader will be distracted by the
            readable content of a page when looking at its layout. The point of using Lorem
            Ipsum is that it has a more-or-less normal distribution of letters, as opposed to
            using 'Content here, content here', making it look like readable English.</p>
          <hr>
          <div class="test-detail">
            <img src="https://getassist.net/wp-content/uploads/2024/01/Himanshu-kumar.webp"
              alt="" class="img-fluid">
            <span class="h6">Emily Johnson</span>
          </div>
        </div>
      </div>
      <div class="slide-card">
        <div class="testimonial-wrap flex">
          <p class="mb-0">It is a long established fact that a reader will be distracted by the
            readable content of a page when looking at its layout. The point of using Lorem
            Ipsum is that it has a more-or-less normal distribution of letters, as opposed to
            using 'Content here, content here', making it look like readable English.</p>
          <hr>
          <div class="test-detail">
            <img src="https://getassist.net/wp-content/uploads/2024/01/Himanshu-kumar.webp"
              alt="" class="img-fluid">
            <span class="h6">Emily Johnson</span>
          </div>
        </div>
      </div>
      <div class="slide-card">
        <div class="testimonial-wrap flex">
          <p class="mb-0">It is a long established fact that a reader will be distracted by the
            readable content of a page when looking at its layout. The point of using Lorem
            Ipsum is that it has a more-or-less normal distribution of letters, as opposed to
            using 'Content here, content here', making it look like readable English.</p>
          <hr>
          <div class="test-detail">
            <img src="https://getassist.net/wp-content/uploads/2024/01/Himanshu-kumar.webp"
              alt="" class="img-fluid">
            <span class="h6">Emily Johnson</span>
          </div>
        </div>
      </div>
      <div class="slide-card">
        <div class="testimonial-wrap flex">
          <p class="mb-0">It is a long established fact that a reader will be distracted by the
            readable content of a page when looking at its layout. The point of using Lorem
            Ipsum is that it has a more-or-less normal distribution of letters, as opposed to
            using 'Content here, content here', making it look like readable English.</p>
          <hr>
          <div class="test-detail">
            <img src="https://getassist.net/wp-content/uploads/2024/01/Himanshu-kumar.webp"
              alt="" class="img-fluid">
            <span class="h6">Emily Johnson</span>
          </div>
        </div>
      </div>
      <div class="slide-card">
        <div class="testimonial-wrap flex">
          <p class="mb-0">It is a long established fact that a reader will be distracted by the
            readable content of a page when looking at its layout. The point of using Lorem
            Ipsum is that it has a more-or-less normal distribution of letters, as opposed to
            using 'Content here, content here', making it look like readable English.</p>
          <hr>
          <div class="test-detail">
            <img src="https://getassist.net/wp-content/uploads/2024/01/Himanshu-kumar.webp"
              alt="" class="img-fluid">
            <span class="h6">Emily Johnson</span>
          </div>
        </div>
      </div>
      <div class="slide-card">
        <div class="testimonial-wrap flex">
          <p class="mb-0">It is a long established fact that a reader will be distracted by the
            readable content of a page when looking at its layout. The point of using Lorem
            Ipsum is that it has a more-or-less normal distribution of letters, as opposed to
            using 'Content here, content here', making it look like readable English.</p>
          <hr>
          <div class="test-detail">
            <img src="https://getassist.net/wp-content/uploads/2024/01/Himanshu-kumar.webp"
              alt="" class="img-fluid">
            <span class="h6">Emily Johnson</span>
          </div>
        </div>
      </div>

    </div>

    <div class="indicators"></div>

  </div>
  <script>
    const wrapper = document.querySelector(".slide-wrapper");
    const carousel = document.querySelector(".carousel");
    const indicatorsContainer = document.querySelector(".indicators");
    const firstCardWidth = carousel.querySelector(".slide-card").offsetWidth;
    const arrowBtns = document.querySelectorAll(".slide-wrapper i");
    const carouselChildrens = [...carousel.children];

    let isDragging = false, isAutoPlay = true, startX, startScrollLeft, timeoutId, activeIndicator;

    // Get the number of cards that can fit in the carousel at once
    let cardPerView = Math.round(carousel.offsetWidth / firstCardWidth);

    // Insert copies of the last few cards to beginning of carousel for infinite scrolling
    carouselChildrens.slice(-cardPerView).reverse().forEach(card => {
      carousel.insertAdjacentHTML("afterbegin", card.outerHTML);
    });

    // Insert copies of the first few cards to end of carousel for infinite scrolling
    carouselChildrens.slice(0, cardPerView).forEach(card => {
      carousel.insertAdjacentHTML("beforeend", card.outerHTML);
    });

    // Scroll the carousel at appropriate postition to hide first few duplicate cards on Firefox
    carousel.classList.add("no-transition");
    carousel.scrollLeft = carousel.offsetWidth;
    carousel.classList.remove("no-transition");

    // Add event listeners for the arrow buttons to scroll the carousel left and right
    arrowBtns.forEach(btn => {
      btn.addEventListener("click", () => {
        carousel.scrollLeft += btn.id == "left" ? -firstCardWidth : firstCardWidth;
      });
    });

    const dragStart = (e) => {
      isDragging = true;
      carousel.classList.add("dragging");
      // Records the initial cursor and scroll position of the carousel
      startX = e.pageX;
      startScrollLeft = carousel.scrollLeft;
    }

    const dragging = (e) => {
      if (!isDragging) return; // if isDragging is false return from here
      // Updates the scroll position of the carousel based on the cursor movement
      carousel.scrollLeft = startScrollLeft - (e.pageX - startX);
    }

    const dragStop = () => {
      isDragging = false;
      carousel.classList.remove("dragging");
    }

    const infiniteScroll = () => {
      // If the carousel is at the beginning, scroll to the end
      if (carousel.scrollLeft === 0) {
        carousel.classList.add("no-transition");
        carousel.scrollLeft = carousel.scrollWidth - (2 * carousel.offsetWidth);
        carousel.classList.remove("no-transition");
      }
      // If the carousel is at the end, scroll to the beginning
      else if (Math.ceil(carousel.scrollLeft) === carousel.scrollWidth - carousel.offsetWidth) {
        carousel.classList.add("no-transition");
        carousel.scrollLeft = carousel.offsetWidth;
        carousel.classList.remove("no-transition");
      }

      // Clear existing timeout & start autoplay if mouse is not hovering over carousel
      clearTimeout(timeoutId);
      if (!wrapper.matches(":hover")) autoPlay();
    }

    const autoPlay = () => {
      if (window.innerWidth < 800 || !isAutoPlay) return; // Return if window is smaller than 800 or isAutoPlay is false
      // Autoplay the carousel after every 2500 ms
      timeoutId = setTimeout(() => carousel.scrollLeft += firstCardWidth, 1000);
    }
    autoPlay();
    const updateActiveIndicator = () => {
      const scrollLeft = carousel.scrollLeft;
      const index = Math.round(scrollLeft / firstCardWidth);
      const indicators = document.querySelectorAll(".indicator");
      indicators.forEach((indicator, i) => {
        if (i === index) {
          setActiveIndicator(indicator);
        }
      });                                                                                              
    }

    carousel.addEventListener("scroll", updateActiveIndicator);


    carousel.addEventListener("mousedown", dragStart);
    carousel.addEventListener("mousemove", dragging);
    document.addEventListener("mouseup", dragStop);
    carousel.addEventListener("scroll", infiniteScroll);
    wrapper.addEventListener("mouseenter", () => clearTimeout(timeoutId));
    wrapper.addEventListener("mouseleave", autoPlay);

    // Create indicators
    for (let i = 0; i < carouselChildrens.length / 2; i++) {
      const indicator = document.createElement("div");
      indicator.classList.add("indicator");
      if (i === 0) {
        indicator.classList.add("active");
        activeIndicator = indicator;
      }
      indicator.addEventListener("click", () => {
        carousel.scrollLeft = i * firstCardWidth;
        setActiveIndicator(indicator);
      });
      indicatorsContainer.appendChild(indicator);
    }

    // Function to set active indicator
    const setActiveIndicator = (indicator) => {
      activeIndicator.classList.remove("active");
      indicator.classList.add("active");
      activeIndicator = indicator;
    }
  </script>

</body>

</html>
